<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title> · Inicio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="description" content="Define tus metas, guarda tu perfil y obtén recetas personalizadas con productos Danone." />
</head>
<body class="bg-slate-50 text-slate-900">
  <!-- Header -->
  <header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-slate-200">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a class="flex items-center gap-2" href="index.html">
        <img src="assets/logo-danone.png" alt="Danone+" class="h-20 w-auto" />
        <span class="font-semibold"></span>
      </a>
      <nav class="text-sm text-slate-600 hidden sm:flex gap-6">
          <a href="welcome.html" class="hover:text-slate-900">Bienvenida</a>
          <a href="login.html" class="hover:text-slate-900">Login</a>
          <a href="onboarding.html" class="hover:text-slate-900">Onboarding</a>
          <a href="recetas.html" class="hover:text-slate-900">Recetas</a>
          <a href="carrito.html" class="hover:text-slate-900">Carrito</a>
</nav>

      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="bg-gradient-to-b from-white to-slate-100">
    <div class="max-w-6xl mx-auto px-4 py-10 md:py-16 grid md:grid-cols-2 gap-8 items-center">
      <div>
        <h1 class="text-3xl md:text-5xl font-semibold leading-tight">Tu salud, tu camino, tu Danone.</h1>
        <p class="mt-3 text-slate-600">Completa tu perfil para recibir recetas personalizadas y agregar con un clic los productos Danone a tu carrito.</p>
      </div>
      <div class="rounded-2xl bg-white shadow-xl border border-slate-200 p-6">
        <p class="text-sm text-slate-600">¡Empecemos!</p>
        <form id="form" class="mt-4 grid gap-4" novalidate>
          <div>
            <label for="name" class="block font-medium">Nombre</label>
            <input id="name" type="text" class="mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-500" placeholder="Escribe tu nombre" />
            <p id="err-name" class="hidden text-sm text-red-600">Ingresa un nombre válido.</p>
          </div>

          <div>
            <span class="block font-medium">Sexo</span>
            <div class="mt-1 flex gap-2 flex-wrap">
              <label class="cursor-pointer rounded-xl border px-4 py-2" data-radio="sex"><input type="radio" name="sex" value="f" class="sr-only" /> Femenino</label>
              <label class="cursor-pointer rounded-xl border px-4 py-2" data-radio="sex"><input type="radio" name="sex" value="m" class="sr-only" /> Masculino</label>
              <label class="cursor-pointer rounded-xl border px-4 py-2" data-radio="sex"><input type="radio" name="sex" value="x" class="sr-only" /> Prefiero no decir</label>
            </div>
            <p id="err-sex" class="hidden text-sm text-red-600">Selecciona una opción.</p>
          </div>

          <div>
            <label for="weight" class="block font-medium">Peso</label>
            <div class="mt-1 flex gap-2">
              <input id="weight" inputmode="decimal" placeholder="Ej. 70.5" class="flex-1 rounded-xl border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-500" />
              <select id="unit" class="rounded-xl border border-slate-300 px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-sky-500">
                <option value="kg">kg</option>
                <option value="lb">lb</option>
              </select>
            </div>
            <p id="err-weight" class="hidden text-sm text-red-600">Ingresa un peso válido mayor a 0.</p>
            <p id="preview-kg" class="text-xs text-slate-600"></p>
          </div>

          <div>
            <label for="goal" class="block font-medium">Objetivo</label>
            <select id="goal" class="mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-sky-500">
              <option value="">Selecciona una opción…</option>
              <option value="mejorar-digestion">Mejorar digestión</option>
              <option value="bajar-peso">Bajar de peso</option>
              <option value="hidratarme-mas">Hidratarme más</option>
              <option value="mas-energia">Tener más energía</option>
            </select>
            <p id="err-goal" class="hidden text-sm text-red-600">Selecciona tu objetivo.</p>
          </div>

          <div class="pt-2 flex items-center gap-3">
            <button type="submit" class="rounded-xl bg-sky-600 hover:bg-sky-700 text-white font-medium px-5 py-3 transition">Guardar y ver recetas</button>
            <span id="form-status" class="text-sm text-slate-600"></span>
          </div>
        </form>
      </div>
    </div>
  </section>

  <footer class="border-t border-slate-200 py-6 text-center text-sm text-slate-500">
    © 2025 Danone+ (prototipo académico)
  </footer>

  <script>
    // Utilidades
    const $ = (s)=>document.querySelector(s);
    function kgFrom(value, unit){
      const n = parseFloat(String(value).replace(",", "."));
      if (!isFinite(n) || n <= 0) return NaN;
      return unit === "lb" ? +(n * 0.453592).toFixed(1) : +n.toFixed(1);
    }

    // Mejora visual radios
    document.querySelectorAll('[data-radio="sex"]').forEach(label=>{
      label.addEventListener("click", ()=>{
        document.querySelectorAll('[data-radio="sex"]').forEach(l=>l.classList.remove("bg-sky-50","border-sky-500"));
        label.classList.add("bg-sky-50","border-sky-500");
        label.querySelector('input[type="radio"]').checked = true;
      });
    });

    // Peso preview
    const unitSelect = $("#unit");
    const weightInput = $("#weight");
    const previewKg = $("#preview-kg");
    function updateWeightPreview(){
      const kg = kgFrom(weightInput.value, unitSelect.value);
      previewKg.textContent = isFinite(kg) ? `Detectado: ${kg} kg` : "";
    }
    unitSelect.addEventListener("change", ()=>{
      weightInput.placeholder = unitSelect.value === "kg" ? "Ej. 70.5" : "Ej. 155";
      updateWeightPreview();
    });
    weightInput.addEventListener("input", updateWeightPreview);

    // Guardar perfil
    const form = $("#form");
    form.addEventListener("submit",(e)=>{
      e.preventDefault();

      const name = $("#name").value.trim();
      const sex = document.querySelector('input[name="sex"]:checked')?.value || "";
      const weightKg = kgFrom(weightInput.value, unitSelect.value);
      const goal = $("#goal").value;

      $("#err-name").classList.toggle("hidden", name.length>1);
      $("#err-sex").classList.toggle("hidden", !!sex);
      $("#err-weight").classList.toggle("hidden", isFinite(weightKg));
      $("#err-goal").classList.toggle("hidden", !!goal);

      if(!(name.length>1 && sex && isFinite(weightKg) && goal)){
        $("#form-status").textContent = "Completa todos los campos.";
        $("#form-status").classList.add("text-red-600");
        return;
      }

      const profile = { name, sex, weightKg, goal };
      localStorage.setItem("profile", JSON.stringify(profile));
      $("#form-status").textContent = "Perfil guardado ✅";
      $("#form-status").classList.remove("text-red-600");
      // Redirigir a recetas
      window.location.href = "recetas.html";
    });
  </script>
</body>
</html>

